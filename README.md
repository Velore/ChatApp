# ChatApp

简易聊天系统

## 项目介绍

## 用户User

用户实体类

### 登录凭证LoginBo

用户登录凭证

用户登录时需要将帐号和密码发送至服务器
服务器验证成功后，返回一个登录凭证给用户

## 群组Group

聊天室抽象为群组
群组本身不记录用户状态
两人单独聊天的群组：用户列表只有两人
多人聊天的群组，用户列表包含多人

### 群组成员GroupMember

该实体类只是为了从数据库中取出数据而存在

## 消息Message

属性包括

- 用户登录凭证
- 信息类型
- 消息发送时间

- 消息的类型
	- `c`客户端发送给服务器端，或者服务器端发送给客户端[新的聊天记录]，子类为ChatMessage
	- `u`客户端第一次登录时，登录后修改用户信息，子类为UpdateMessage
	- `s`服务器端发送登录信息给客户端，或客户端注销时向服务器端发送，子类为StatusMessage
	- `i`客户端查询信息，服务器端返回查询结果，子类为InfoMessage

根据类型不同转换为以下子类

### 聊天ChatMessage

在客户端和服务器端之间传递的聊天信息
客户端发送给服务器
服务器再发送给其他的客户端

### 状态StatusMessage

用户登录时，第一次发送UpdateMessage，服务器端返回新的LoginBo的StatusMessage
用户注销时，发送StatusMessage，服务器端关闭用户对应serverThread的进程，并发送注销通知
用户端接收到服务器端发送的注销通知(LoginBo中[uid=0000]的StatusMessage)时，关闭全部线程

### 查询信息InfoMessage

客户端发送给服务器需要查询的对象
服务器返回客户端查询的结果信息
客户端接收到查询信息只需要打印即可

- 属性包括
- 客户端向服务器查询的信息类型`u:用户信息，g:群组信息，c:聊天信息`
- 查询的具体参数
	- 若infoType是u，specType内存放uid(可多个)，代表查询用户信息
	- 若infoType是g，specTYpe内存放gid(可多个)，代表查询群组信息
	- 若infoType是c，specType内存放群组gid(唯一)，代表查询聊天信息
- 服务器端向客户端响应的信息列表（用户信息 或 群组信息 或 聊天信息）

### 更新updateMessage

客户端登录时发送一个只包含帐号和密码的用户信息
登录后，客户端发送给服务器端需要更新的用户信息

## 关注Attention

朋友实体类转换为关注

## 返回信息ReturnInfo

属性包括状态码和简要信息

### 状态码StatusCode

enum类

## 服务器端

## 客户端

